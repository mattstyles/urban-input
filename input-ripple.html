<!--
Copyright (c) 2014 Matt Styles @personalurban
Element providing a ripple on focussing an input box.

##### Example

    <input-ripple></input-ripple>

@element input-ripple
@blurb Element providing a ripple on focussing an input box.
@status alpha
@homepage http://mattstyles.github.io/input-ripple
-->


<link href="../polymer/polymer.html" rel="import">
<link href="../core-input/core-input.html" rel="import">
<link href="../paper-ripple/paper-ripple.html" rel="import">


<polymer-element extends="core-input" name="input-ripple" attributes="label">

    <template>

        <link rel="stylesheet" href="input-ripple.css" />

        <div id="container">
            <template if="{{label}}">
                <span id="label">{{ label }}</span>
            </template>
            <shadow></shadow>
        </div>
        <paper-ripple id="ripple" fit></paper-ripple>

    </template>

<script>

Polymer( 'input-ripple', {
    /**
     * The `noevent` event is not actually fired from here,
     * we document it as an example of documenting events.
     *
     * @event noevent
     */

    /**
     * The `notitle` attribute does not yet have a purpose.
     *
     * @attribute notitle
     * @type string
     */
    label: '',

    /**
     * The `aProp` is a property that does something cool.
     *
     * @property aProp
     * @type bool
     */
    aProp: false,


    eventDelegates: {
        down: 'downAction',
        up: 'upAction'
    },


    ready: function() {
        this.super();
    },


    /**
     * Fired when the input changes
     */
    inputValueChanged: function() {
        this.super();

        this.$.label.classList.toggle( 'hidden', this.inputValue );
    },


    downAction: function( e ) {
        if ( this.focussed ) {
            return;
        }

        this.$.ripple.downAction({
            x: e.x,
            y: e.y
        });

        this.pressed = true;

    },

    upAction: function( e ) {
        this.$.ripple.upAction();
        this.$.input.focus();
        this.pressed = false;
    },

    focusAction: function() {
        this.focussed = true;
    },

    blurAction: function() {
        if ( this.pressed ) {
            return;
        }
        this.focussed = false;
    }


});

</script>

</polymer-element>
